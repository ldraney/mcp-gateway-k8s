apiVersion: v1
kind: ConfigMap
metadata:
  name: openclaw-config
  namespace: openclaw
data:
  soul.md: |
    # Pal-E

    You are **Pal-E**, Lucas's personal AI assistant. You're friendly, concise, and helpful.
    You run on Telegram â€” keep replies short and conversational. No walls of text.

    ## Your Role

    You are an **orchestrator**. You don't access services directly â€” you spawn specialist
    subagents who handle specific domains. Your job is to understand what the user wants
    and route it to the right agent.

    ## Subagent Menu

    Use `sessions_spawn` to delegate tasks to these agents:

    | Agent | Handles | Example prompts |
    |---|---|---|
    | `notion-agent` | Notes, docs, databases, wikis | "search my notes forâ€¦", "create a page aboutâ€¦" |
    | `gcal-agent` | Calendar events, scheduling | "what's on my calendar?", "schedule a meetingâ€¦" |
    | `gmail-agent` | Email reading, sending, search | "check my email", "send an email toâ€¦" |
    | `linkedin-agent` | LinkedIn posts, scheduling | "show scheduled posts", "draft a post aboutâ€¦" |

    ## When to Spawn vs Just Chat

    **Spawn a subagent** when the user asks about:
    - Calendar, events, scheduling â†’ `gcal-agent`
    - Email, inbox, sending messages â†’ `gmail-agent`
    - Notes, docs, Notion pages â†’ `notion-agent`
    - LinkedIn, posts, professional content â†’ `linkedin-agent`

    **Just reply directly** when:
    - Casual conversation ("hi", "how are you", "thanks")
    - General questions that don't need any service
    - The user asks about you or your capabilities
    - Clarifying what the user wants before routing

    ## Service Boundaries

    You can **only** use these four services: Google Calendar, Gmail, Notion, and LinkedIn.
    If the user asks about a service you don't have (Slack, WhatsApp, Twitter, etc.),
    say so honestly and list what you *can* do. Never pretend you can handle an unsupported service.

    ## Always Respond

    Never return an empty or blank reply. If you don't understand the user's input,
    ask for clarification: "I didn't catch that â€” could you rephrase?"

    ## Personality

    - **Always respond in English** unless the user writes in another language
    - Friendly and casual â€” you're a pal, not a corporate bot
    - Brief replies. One or two sentences for casual chat.
    - When spawning an agent, briefly tell the user what you're doing ("Let me check your calendar...")
    - If an agent errors or needs auth, relay the message clearly
  openclaw.json: |
    {
      "gateway": {
        "mode": "local",
        "port": 18789,
        "bind": "lan"
      },
      "models": {
        "providers": {
          "ollama": {
            "baseUrl": "http://ollama:11434/v1",
            "apiKey": "not-required",
            "api": "openai-completions",
            "models": [
              {
                "id": "qwen2.5:7b",
                "name": "Qwen 2.5 7B",
                "reasoning": false,
                "input": ["text"],
                "cost": { "input": 0, "output": 0, "cacheRead": 0, "cacheWrite": 0 },
                "contextWindow": 32768,
                "maxTokens": 8192
              }
            ]
          }
        }
      },
      "channels": {
        "telegram": {
          "enabled": true,
          "tokenFile": "/run/secrets/telegram-bot-token",
          "dmPolicy": "open",
          "allowFrom": ["*"],
          "groupPolicy": "disabled",
          "streamMode": "partial",
          "reactionLevel": "ack"
        }
      },
      "plugins": {
        "enabled": true,
        "entries": {
          "telegram": {
            "enabled": true
          },
          "openclaw-mcp-bridge": {
            "enabled": true,
            "config": {
              "tokenDbPath": "/data/tokens/mcp-bridge-tokens.db",
              "servers": [
                {
                  "name": "Notion",
                  "url": "http://notion-mcp-remote:8000",
                  "prefix": "notion",
                  "path": "/mcp"
                },
                {
                  "name": "Google Calendar",
                  "url": "http://gcal-mcp-remote:8001",
                  "prefix": "gcal",
                  "path": "/mcp"
                },
                {
                  "name": "Gmail",
                  "url": "http://gmail-mcp-remote:8002",
                  "prefix": "gmail",
                  "path": "/mcp"
                },
                {
                  "name": "LinkedIn",
                  "url": "http://linkedin-scheduler-remote:8003",
                  "prefix": "linkedin",
                  "path": "/mcp"
                }
              ]
            }
          }
        }
      },
      "agents": {
        "defaults": {
          "model": {
            "primary": "ollama/qwen2.5:7b"
          },
          "maxConcurrent": 4,
          "subagents": {
            "maxConcurrent": 8
          },
          "heartbeat": {
            "every": "30m"
          },
          "compaction": {
            "mode": "safeguard"
          }
        },
        "list": [
          {
            "id": "pal-e",
            "default": true,
            "name": "Pal-E",
            "identity": {
              "name": "Pal-E",
              "emoji": "ðŸ¤–"
            },
            "tools": {
              "allow": ["sessions_spawn", "agents_list", "session_status"]
            },
            "subagents": {
              "allowAgents": ["notion-agent", "gcal-agent", "gmail-agent", "linkedin-agent"]
            }
          },
          {
            "id": "notion-agent",
            "name": "Notion Agent",
            "tools": {
              "profile": "minimal",
              "alsoAllow": ["notion_*"]
            }
          },
          {
            "id": "gcal-agent",
            "name": "Calendar Agent",
            "tools": {
              "profile": "minimal",
              "alsoAllow": ["gcal_*"]
            }
          },
          {
            "id": "gmail-agent",
            "name": "Gmail Agent",
            "tools": {
              "profile": "minimal",
              "alsoAllow": ["gmail_*"]
            }
          },
          {
            "id": "linkedin-agent",
            "name": "LinkedIn Agent",
            "tools": {
              "profile": "minimal",
              "alsoAllow": ["linkedin_*"]
            }
          }
        ]
      }
    }
